<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="101,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T63U3">val</span>] = getPixelsValue(<span class="var type1" id="S3T62U6">img</span>, <span class="var type1" id="S4T63U7">index</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="101,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo" id="T4:U4">[<span class="var type1" id="S5T4U11">x</span>, <span class="var type1" id="S6T4U12">y</span>, <span class="mxinfo" id="T4:U7"><span class="var type1" id="S7T4U13">z</span></span>] = size(<span class="var type1" id="S3T62U16">img</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo" id="T4:U10"><span class="var type1" id="S9T4U19">m</span> = <span class="mxinfo" id="T4:U12">size(<span class="var type1" id="S4T63U22">index</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="101,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%index(:,1) = index(:,1)*x;</span></span></span>
<span class="srcline"><span class="lineno"><a href="101,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%index(:,2) = index(:,2)*y;</span></span></span>
<span class="srcline"><span class="lineno"><a href="101,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%index = round(index);</span></span></span>
<span class="srcline"><span class="lineno"><a href="101,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo" id="T21:U14"><span class="var type1" id="S10T21U26">lx</span> = <span class="mxinfo" id="T21:U16">floor(<span class="mxinfo" id="T21:U17"><span class="var type1" id="S4T63U30">index</span>(:, <span class="mxinfo" id="T4:U19">1</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T21:U20"><span class="var type1" id="S12T21U35">ly</span> = <span class="mxinfo" id="T21:U22">floor(<span class="mxinfo" id="T21:U23"><span class="var type1" id="S4T63U39">index</span>(:, <span class="mxinfo" id="T4:U25">2</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo" id="T21:U26"><span class="var type1" id="S13T21U44">rx</span> = <span class="mxinfo" id="T21:U28">ceil(<span class="mxinfo" id="T21:U29"><span class="var type1" id="S4T63U48">index</span>(:, <span class="mxinfo" id="T4:U31">1</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo" id="T21:U32"><span class="var type1" id="S15T21U53">ry</span> = <span class="mxinfo" id="T21:U34">ceil(<span class="mxinfo" id="T21:U35"><span class="var type1" id="S4T63U57">index</span>(:, <span class="mxinfo" id="T4:U37">2</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="101,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo" id="T92:U38"><span class="mxinfo" id="T92:U39"><span class="var type1" id="S10T21U63">lx</span>(<span class="mxinfo" id="T64:U41"><span class="var type1" id="S10T21U65">lx</span>&lt;<span class="mxinfo" id="T4:U43">1</span></span>)</span>=<span class="mxinfo" id="T4:U44">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo" id="T92:U45"><span class="mxinfo" id="T92:U46"><span class="var type1" id="S12T21U71">ly</span>(<span class="mxinfo" id="T64:U48"><span class="var type1" id="S12T21U73">ly</span>&lt;<span class="mxinfo" id="T4:U50">1</span></span>)</span>=<span class="mxinfo" id="T4:U51">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo" id="T92:U52"><span class="mxinfo" id="T92:U53"><span class="var type1" id="S13T21U79">rx</span>(<span class="mxinfo" id="T64:U55"><span class="var type1" id="S13T21U81">rx</span>&lt;<span class="mxinfo" id="T4:U57">1</span></span>)</span>=<span class="mxinfo" id="T4:U58">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo" id="T92:U59"><span class="mxinfo" id="T92:U60"><span class="var type1" id="S15T21U87">ry</span>(<span class="mxinfo" id="T64:U62"><span class="var type1" id="S15T21U89">ry</span>&lt;<span class="mxinfo" id="T4:U64">1</span></span>)</span>=<span class="mxinfo" id="T4:U65">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo" id="T92:U66"><span class="mxinfo" id="T92:U67"><span class="var type1" id="S10T21U95">lx</span>(<span class="mxinfo" id="T64:U69"><span class="var type1" id="S10T21U97">lx</span>&gt;<span class="var type1" id="S5T4U98">x</span></span>)</span>=<span class="var type1" id="S5T4U99">x</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo" id="T92:U73"><span class="mxinfo" id="T92:U74"><span class="var type1" id="S12T21U103">ly</span>(<span class="mxinfo" id="T64:U76"><span class="var type1" id="S12T21U105">ly</span>&gt;<span class="var type1" id="S6T4U106">y</span></span>)</span>=<span class="var type1" id="S6T4U107">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo" id="T92:U80"><span class="mxinfo" id="T92:U81"><span class="var type1" id="S13T21U111">rx</span>(<span class="mxinfo" id="T64:U83"><span class="var type1" id="S13T21U113">rx</span>&gt;<span class="var type1" id="S5T4U114">x</span></span>)</span>=<span class="var type1" id="S5T4U115">x</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo" id="T92:U87"><span class="mxinfo" id="T92:U88"><span class="var type1" id="S15T21U119">ry</span>(<span class="mxinfo" id="T64:U90"><span class="var type1" id="S15T21U121">ry</span>&gt;<span class="var type1" id="S6T4U122">y</span></span>)</span>=<span class="var type1" id="S6T4U123">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,21" id="srcline21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="101,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo" id="T63:U94"><span class="var type1" id="S2T63U126">val</span> = <span class="mxinfo" id="T63:U96">zeros(<span class="mxinfo" id="T4:U97"><span class="var type1" id="S9T4U129">m</span></span>, <span class="mxinfo" id="T4:U99">3</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,23" id="srcline23">23</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S17T4U134">i</span>=<span class="mxinfo" id="T4:U101">1</span>:<span class="var type1" id="S9T4U137">m</span></span></span>
<span class="srcline"><span class="lineno"><a href="101,24" id="srcline24">24</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T5:U103"><span class="mxinfo" id="T4:U104"><span class="var type1" id="S10T21U143">lx</span>(<span class="var type1" id="S17T4U144">i</span>)</span> == <span class="mxinfo" id="T4:U107"><span class="var type1" id="S13T21U146">rx</span>(<span class="var type1" id="S17T4U147">i</span>)</span></span> &amp;&amp; <span class="mxinfo" id="T5:U110"><span class="mxinfo" id="T4:U111"><span class="var type1" id="S12T21U150">ly</span>(<span class="var type1" id="S17T4U151">i</span>)</span> == <span class="mxinfo" id="T4:U114"><span class="var type1" id="S15T21U153">ry</span>(<span class="var type1" id="S17T4U154">i</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="101,25" id="srcline25">25</a></span><span class="line">        <span class="mxinfo" id="T66:U117"><span class="mxinfo" id="T66:U118"><span class="var type1" id="S2T63U158">val</span>(<span class="var type1" id="S17T4U159">i</span>, :)</span> = <span class="mxinfo" id="T65:U121"><span class="var type1" id="S3T62U162">img</span>(<span class="mxinfo" id="T4:U123"><span class="var type1" id="S10T21U164">lx</span>(<span class="var type1" id="S17T4U165">i</span>)</span>, <span class="mxinfo" id="T4:U126"><span class="var type1" id="S12T21U167">ly</span>(<span class="var type1" id="S17T4U168">i</span>)</span>, :)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,26" id="srcline26">26</a></span><span class="line">    <span class="keyword">elseif</span> <span class="mxinfo" id="T5:U129"><span class="mxinfo" id="T4:U130"><span class="var type1" id="S10T21U173">lx</span>(<span class="var type1" id="S17T4U174">i</span>)</span> == <span class="mxinfo" id="T4:U133"><span class="var type1" id="S13T21U176">rx</span>(<span class="var type1" id="S17T4U177">i</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="101,27" id="srcline27">27</a></span><span class="line">        <span class="mxinfo" id="T66:U136"><span class="mxinfo" id="T66:U137"><span class="var type1" id="S2T63U181">val</span>(<span class="var type1" id="S17T4U182">i</span>, :)</span> = (<span class="mxinfo" id="T65:U140"><span class="mxinfo" id="T65:U141"><span class="mxinfo" id="T65:U142"><span class="var type1" id="S3T62U188">img</span>(<span class="mxinfo" id="T4:U144"><span class="var type1" id="S10T21U190">lx</span>(<span class="var type1" id="S17T4U191">i</span>)</span>, <span class="mxinfo" id="T4:U147"><span class="var type1" id="S12T21U193">ly</span>(<span class="var type1" id="S17T4U194">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U150"><span class="mxinfo" id="T4:U151"><span class="var type1" id="S15T21U199">ry</span>(<span class="var type1" id="S17T4U200">i</span>)</span> - <span class="mxinfo" id="T4:U154"><span class="var type1" id="S4T63U202">index</span>(<span class="var type1" id="S17T4U203">i</span>, <span class="mxinfo" id="T4:U157">2</span>)</span></span>)</span> + <span class="mxinfo" id="T65:U158"><span class="mxinfo" id="T65:U159"><span class="var type1" id="S3T62U207">img</span>(<span class="mxinfo" id="T4:U161"><span class="var type1" id="S10T21U209">lx</span>(<span class="var type1" id="S17T4U210">i</span>)</span>, <span class="mxinfo" id="T4:U164"><span class="var type1" id="S15T21U212">ry</span>(<span class="var type1" id="S17T4U213">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U167"><span class="mxinfo" id="T4:U168"><span class="var type1" id="S4T63U218">index</span>(<span class="var type1" id="S17T4U219">i</span>, <span class="mxinfo" id="T4:U171">2</span>)</span> - <span class="mxinfo" id="T4:U172"><span class="var type1" id="S12T21U222">ly</span>(<span class="var type1" id="S17T4U223">i</span>)</span></span>)</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,28" id="srcline28">28</a></span><span class="line">    <span class="keyword">elseif</span> <span class="mxinfo" id="T5:U175"><span class="mxinfo" id="T4:U176"><span class="var type1" id="S12T21U227">ly</span>(<span class="var type1" id="S17T4U228">i</span>)</span> == <span class="mxinfo" id="T4:U179"><span class="var type1" id="S15T21U230">ry</span>(<span class="var type1" id="S17T4U231">i</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="101,29" id="srcline29">29</a></span><span class="line">        <span class="mxinfo" id="T66:U182"><span class="mxinfo" id="T66:U183"><span class="var type1" id="S2T63U235">val</span>(<span class="var type1" id="S17T4U236">i</span>, :)</span> = (<span class="mxinfo" id="T65:U186"><span class="mxinfo" id="T65:U187"><span class="mxinfo" id="T65:U188"><span class="var type1" id="S3T62U242">img</span>(<span class="mxinfo" id="T4:U190"><span class="var type1" id="S10T21U244">lx</span>(<span class="var type1" id="S17T4U245">i</span>)</span>, <span class="mxinfo" id="T4:U193"><span class="var type1" id="S12T21U247">ly</span>(<span class="var type1" id="S17T4U248">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U196"><span class="mxinfo" id="T4:U197"><span class="var type1" id="S13T21U253">rx</span>(<span class="var type1" id="S17T4U254">i</span>)</span> - <span class="mxinfo" id="T4:U200"><span class="var type1" id="S4T63U256">index</span>(<span class="var type1" id="S17T4U257">i</span>, <span class="mxinfo" id="T4:U203">1</span>)</span></span>)</span> + <span class="mxinfo" id="T65:U204"><span class="mxinfo" id="T65:U205"><span class="var type1" id="S3T62U261">img</span>(<span class="mxinfo" id="T4:U207"><span class="var type1" id="S13T21U263">rx</span>(<span class="var type1" id="S17T4U264">i</span>)</span>, <span class="mxinfo" id="T4:U210"><span class="var type1" id="S12T21U266">ly</span>(<span class="var type1" id="S17T4U267">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U213"><span class="mxinfo" id="T4:U214"><span class="var type1" id="S4T63U272">index</span>(<span class="var type1" id="S17T4U273">i</span>, <span class="mxinfo" id="T4:U217">1</span>)</span> - <span class="mxinfo" id="T4:U218"><span class="var type1" id="S10T21U276">lx</span>(<span class="var type1" id="S17T4U277">i</span>)</span></span>)</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,30" id="srcline30">30</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="101,31" id="srcline31">31</a></span><span class="line">        <span class="mxinfo" id="T66:U221"><span class="mxinfo" id="T66:U222"><span class="var type1" id="S2T63U282">val</span>(<span class="var type1" id="S17T4U283">i</span>, :)</span> = <span class="mxinfo" id="T66:U225">reshape(<span class="mxinfo" id="T65:U226">(<span class="mxinfo" id="T65:U227"><span class="mxinfo" id="T65:U228"><span class="mxinfo" id="T65:U229"><span class="var type1" id="S3T62U292">img</span>(<span class="mxinfo" id="T4:U231"><span class="var type1" id="S10T21U294">lx</span>(<span class="var type1" id="S17T4U295">i</span>)</span>, <span class="mxinfo" id="T4:U234"><span class="var type1" id="S12T21U297">ly</span>(<span class="var type1" id="S17T4U298">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U237"><span class="mxinfo" id="T4:U238"><span class="var type1" id="S15T21U303">ry</span>(<span class="var type1" id="S17T4U304">i</span>)</span> - <span class="mxinfo" id="T4:U241"><span class="var type1" id="S4T63U306">index</span>(<span class="var type1" id="S17T4U307">i</span>, <span class="mxinfo" id="T4:U244">2</span>)</span></span>)</span> + <span class="mxinfo" id="T65:U245"><span class="mxinfo" id="T65:U246"><span class="var type1" id="S3T62U311">img</span>(<span class="mxinfo" id="T4:U248"><span class="var type1" id="S10T21U313">lx</span>(<span class="var type1" id="S17T4U314">i</span>)</span>, <span class="mxinfo" id="T4:U251"><span class="var type1" id="S15T21U316">ry</span>(<span class="var type1" id="S17T4U317">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U254"><span class="mxinfo" id="T4:U255"><span class="var type1" id="S4T63U322">index</span>(<span class="var type1" id="S17T4U323">i</span>, <span class="mxinfo" id="T4:U258">2</span>)</span> - <span class="mxinfo" id="T4:U259"><span class="var type1" id="S12T21U326">ly</span>(<span class="var type1" id="S17T4U327">i</span>)</span></span>)</span></span>)*(<span class="mxinfo" id="T4:U262"><span class="mxinfo" id="T4:U263"><span class="var type1" id="S13T21U331">rx</span>(<span class="var type1" id="S17T4U332">i</span>)</span>-<span class="mxinfo" id="T4:U266"><span class="var type1" id="S4T63U334">index</span>(<span class="var type1" id="S17T4U335">i</span>, <span class="mxinfo" id="T4:U269">1</span>)</span></span>)</span>, 1, 3)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,32" id="srcline32">32</a></span><span class="line">        <span class="mxinfo" id="T66:U270"><span class="mxinfo" id="T66:U271"><span class="var type1" id="S2T63U342">val</span>(<span class="var type1" id="S17T4U343">i</span>, :)</span> = <span class="mxinfo" id="T66:U274"><span class="mxinfo" id="T66:U275"><span class="var type1" id="S2T63U347">val</span>(<span class="var type1" id="S17T4U348">i</span>, :)</span> + <span class="mxinfo" id="T66:U278">reshape(<span class="mxinfo" id="T65:U279">(<span class="mxinfo" id="T65:U280"><span class="mxinfo" id="T65:U281"><span class="mxinfo" id="T65:U282"><span class="var type1" id="S3T62U357">img</span>(<span class="mxinfo" id="T4:U284"><span class="var type1" id="S13T21U359">rx</span>(<span class="var type1" id="S17T4U360">i</span>)</span>, <span class="mxinfo" id="T4:U287"><span class="var type1" id="S12T21U362">ly</span>(<span class="var type1" id="S17T4U363">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U290"><span class="mxinfo" id="T4:U291"><span class="var type1" id="S15T21U368">ry</span>(<span class="var type1" id="S17T4U369">i</span>)</span>-<span class="mxinfo" id="T4:U294"><span class="var type1" id="S4T63U371">index</span>(<span class="var type1" id="S17T4U372">i</span>,<span class="mxinfo" id="T4:U297">2</span>)</span></span>)</span> + <span class="mxinfo" id="T65:U298"><span class="mxinfo" id="T65:U299"><span class="var type1" id="S3T62U376">img</span>(<span class="mxinfo" id="T4:U301"><span class="var type1" id="S13T21U378">rx</span>(<span class="var type1" id="S17T4U379">i</span>)</span>, <span class="mxinfo" id="T4:U304"><span class="var type1" id="S15T21U381">ry</span>(<span class="var type1" id="S17T4U382">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T4:U307"><span class="mxinfo" id="T4:U308"><span class="var type1" id="S4T63U387">index</span>(<span class="var type1" id="S17T4U388">i</span>, <span class="mxinfo" id="T4:U311">2</span>)</span> - <span class="mxinfo" id="T4:U312"><span class="var type1" id="S12T21U391">ly</span>(<span class="var type1" id="S17T4U392">i</span>)</span></span>)</span></span>)*(<span class="mxinfo" id="T4:U315"><span class="mxinfo" id="T4:U316"><span class="var type1" id="S4T63U396">index</span>(<span class="var type1" id="S17T4U397">i</span>, <span class="mxinfo" id="T4:U319">1</span>)</span> - <span class="mxinfo" id="T4:U320"><span class="var type1" id="S10T21U400">lx</span>(<span class="var type1" id="S17T4U401">i</span>)</span></span>)</span>, 1, 3)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="101,33" id="srcline33">33</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="101,34" id="srcline34">34</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
