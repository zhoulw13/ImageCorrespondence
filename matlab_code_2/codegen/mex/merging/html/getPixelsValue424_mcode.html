<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="100,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T57U3">val</span>] = getPixelsValue(<span class="var type1" id="S3T54U6">img</span>, <span class="var type1" id="S4T2U7">index</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="100,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo" id="T8:U4">[<span class="var type1" id="S5T8U11">x</span>, <span class="var type1" id="S6T8U12">y</span>, <span class="mxinfo" id="T8:U7"><span class="var type1" id="S7T8U13">z</span></span>] = size(<span class="var type1" id="S3T54U16">img</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo" id="T8:U10"><span class="var type1" id="S9T8U19">m</span> = <span class="mxinfo" id="T8:U12">size(<span class="var type1" id="S4T2U22">index</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="100,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%index(:,1) = index(:,1)*x;</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%index(:,2) = index(:,2)*y;</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%index = round(index);</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo" id="T27:U14"><span class="var type1" id="S10T27U26">lx</span> = <span class="mxinfo" id="T27:U16">floor(<span class="mxinfo" id="T27:U17"><span class="var type1" id="S4T2U30">index</span>(:, <span class="mxinfo" id="T8:U19">1</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T27:U20"><span class="var type1" id="S12T27U35">ly</span> = <span class="mxinfo" id="T27:U22">floor(<span class="mxinfo" id="T27:U23"><span class="var type1" id="S4T2U39">index</span>(:, <span class="mxinfo" id="T8:U25">2</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo" id="T27:U26"><span class="var type1" id="S13T27U44">rx</span> = <span class="mxinfo" id="T27:U28">ceil(<span class="mxinfo" id="T27:U29"><span class="var type1" id="S4T2U48">index</span>(:, <span class="mxinfo" id="T8:U31">1</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo" id="T27:U32"><span class="var type1" id="S15T27U53">ry</span> = <span class="mxinfo" id="T27:U34">ceil(<span class="mxinfo" id="T27:U35"><span class="var type1" id="S4T2U57">index</span>(:, <span class="mxinfo" id="T8:U37">2</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="100,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo" id="T27:U38"><span class="mxinfo" id="T27:U39"><span class="var type1" id="S10T27U63">lx</span>(<span class="mxinfo" id="T26:U41"><span class="var type1" id="S10T27U65">lx</span>&lt;<span class="mxinfo" id="T8:U43">1</span></span>)</span>=<span class="mxinfo" id="T8:U44">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo" id="T27:U45"><span class="mxinfo" id="T27:U46"><span class="var type1" id="S12T27U71">ly</span>(<span class="mxinfo" id="T26:U48"><span class="var type1" id="S12T27U73">ly</span>&lt;<span class="mxinfo" id="T8:U50">1</span></span>)</span>=<span class="mxinfo" id="T8:U51">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo" id="T27:U52"><span class="mxinfo" id="T27:U53"><span class="var type1" id="S13T27U79">rx</span>(<span class="mxinfo" id="T26:U55"><span class="var type1" id="S13T27U81">rx</span>&lt;<span class="mxinfo" id="T8:U57">1</span></span>)</span>=<span class="mxinfo" id="T8:U58">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo" id="T27:U59"><span class="mxinfo" id="T27:U60"><span class="var type1" id="S15T27U87">ry</span>(<span class="mxinfo" id="T26:U62"><span class="var type1" id="S15T27U89">ry</span>&lt;<span class="mxinfo" id="T8:U64">1</span></span>)</span>=<span class="mxinfo" id="T8:U65">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo" id="T27:U66"><span class="mxinfo" id="T27:U67"><span class="var type1" id="S10T27U95">lx</span>(<span class="mxinfo" id="T26:U69"><span class="var type1" id="S10T27U97">lx</span>&gt;<span class="var type1" id="S5T8U98">x</span></span>)</span>=<span class="var type1" id="S5T8U99">x</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo" id="T27:U73"><span class="mxinfo" id="T27:U74"><span class="var type1" id="S12T27U103">ly</span>(<span class="mxinfo" id="T26:U76"><span class="var type1" id="S12T27U105">ly</span>&gt;<span class="var type1" id="S6T8U106">y</span></span>)</span>=<span class="var type1" id="S6T8U107">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo" id="T27:U80"><span class="mxinfo" id="T27:U81"><span class="var type1" id="S13T27U111">rx</span>(<span class="mxinfo" id="T26:U83"><span class="var type1" id="S13T27U113">rx</span>&gt;<span class="var type1" id="S5T8U114">x</span></span>)</span>=<span class="var type1" id="S5T8U115">x</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo" id="T27:U87"><span class="mxinfo" id="T27:U88"><span class="var type1" id="S15T27U119">ry</span>(<span class="mxinfo" id="T26:U90"><span class="var type1" id="S15T27U121">ry</span>&gt;<span class="var type1" id="S6T8U122">y</span></span>)</span>=<span class="var type1" id="S6T8U123">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,21" id="srcline21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="100,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo" id="T57:U94"><span class="var type1" id="S2T57U126">val</span> = <span class="mxinfo" id="T57:U96">zeros(<span class="var type1" id="S9T8U129">m</span>, <span class="mxinfo" id="T8:U98">3</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,23" id="srcline23">23</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S17T8U134">i</span>=<span class="mxinfo" id="T8:U100">1</span>:<span class="var type1" id="S9T8U137">m</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,24" id="srcline24">24</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T10:U102"><span class="mxinfo" id="T8:U103"><span class="var type1" id="S10T27U143">lx</span>(<span class="var type1" id="S17T8U144">i</span>)</span> == <span class="mxinfo" id="T8:U106"><span class="var type1" id="S13T27U146">rx</span>(<span class="var type1" id="S17T8U147">i</span>)</span></span> &amp;&amp; <span class="mxinfo" id="T10:U109"><span class="mxinfo" id="T8:U110"><span class="var type1" id="S12T27U150">ly</span>(<span class="var type1" id="S17T8U151">i</span>)</span> == <span class="mxinfo" id="T8:U113"><span class="var type1" id="S15T27U153">ry</span>(<span class="var type1" id="S17T8U154">i</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="100,25" id="srcline25">25</a></span><span class="line">        <span class="mxinfo" id="T56:U116"><span class="mxinfo" id="T56:U117"><span class="var type1" id="S2T57U158">val</span>(<span class="var type1" id="S17T8U159">i</span>, :)</span> = <span class="mxinfo" id="T55:U120"><span class="var type1" id="S3T54U162">img</span>(<span class="mxinfo" id="T8:U122"><span class="var type1" id="S10T27U164">lx</span>(<span class="var type1" id="S17T8U165">i</span>)</span>, <span class="mxinfo" id="T8:U125"><span class="var type1" id="S12T27U167">ly</span>(<span class="var type1" id="S17T8U168">i</span>)</span>, :)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,26" id="srcline26">26</a></span><span class="line">    <span class="keyword">elseif</span> <span class="mxinfo" id="T10:U128"><span class="mxinfo" id="T8:U129"><span class="var type1" id="S10T27U173">lx</span>(<span class="var type1" id="S17T8U174">i</span>)</span> == <span class="mxinfo" id="T8:U132"><span class="var type1" id="S13T27U176">rx</span>(<span class="var type1" id="S17T8U177">i</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="100,27" id="srcline27">27</a></span><span class="line">        <span class="mxinfo" id="T56:U135"><span class="mxinfo" id="T56:U136"><span class="var type1" id="S2T57U181">val</span>(<span class="var type1" id="S17T8U182">i</span>, :)</span> = (<span class="mxinfo" id="T55:U139"><span class="mxinfo" id="T55:U140"><span class="mxinfo" id="T55:U141"><span class="var type1" id="S3T54U188">img</span>(<span class="mxinfo" id="T8:U143"><span class="var type1" id="S10T27U190">lx</span>(<span class="var type1" id="S17T8U191">i</span>)</span>, <span class="mxinfo" id="T8:U146"><span class="var type1" id="S12T27U193">ly</span>(<span class="var type1" id="S17T8U194">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U149"><span class="mxinfo" id="T8:U150"><span class="var type1" id="S15T27U199">ry</span>(<span class="var type1" id="S17T8U200">i</span>)</span> - <span class="mxinfo" id="T8:U153"><span class="var type1" id="S4T2U202">index</span>(<span class="var type1" id="S17T8U203">i</span>, <span class="mxinfo" id="T8:U156">2</span>)</span></span>)</span> + <span class="mxinfo" id="T55:U157"><span class="mxinfo" id="T55:U158"><span class="var type1" id="S3T54U207">img</span>(<span class="mxinfo" id="T8:U160"><span class="var type1" id="S10T27U209">lx</span>(<span class="var type1" id="S17T8U210">i</span>)</span>, <span class="mxinfo" id="T8:U163"><span class="var type1" id="S15T27U212">ry</span>(<span class="var type1" id="S17T8U213">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U166"><span class="mxinfo" id="T8:U167"><span class="var type1" id="S4T2U218">index</span>(<span class="var type1" id="S17T8U219">i</span>, <span class="mxinfo" id="T8:U170">2</span>)</span> - <span class="mxinfo" id="T8:U171"><span class="var type1" id="S12T27U222">ly</span>(<span class="var type1" id="S17T8U223">i</span>)</span></span>)</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,28" id="srcline28">28</a></span><span class="line">    <span class="keyword">elseif</span> <span class="mxinfo" id="T10:U174"><span class="mxinfo" id="T8:U175"><span class="var type1" id="S12T27U227">ly</span>(<span class="var type1" id="S17T8U228">i</span>)</span> == <span class="mxinfo" id="T8:U178"><span class="var type1" id="S15T27U230">ry</span>(<span class="var type1" id="S17T8U231">i</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="100,29" id="srcline29">29</a></span><span class="line">        <span class="mxinfo" id="T56:U181"><span class="mxinfo" id="T56:U182"><span class="var type1" id="S2T57U235">val</span>(<span class="var type1" id="S17T8U236">i</span>, :)</span> = (<span class="mxinfo" id="T55:U185"><span class="mxinfo" id="T55:U186"><span class="mxinfo" id="T55:U187"><span class="var type1" id="S3T54U242">img</span>(<span class="mxinfo" id="T8:U189"><span class="var type1" id="S10T27U244">lx</span>(<span class="var type1" id="S17T8U245">i</span>)</span>, <span class="mxinfo" id="T8:U192"><span class="var type1" id="S12T27U247">ly</span>(<span class="var type1" id="S17T8U248">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U195"><span class="mxinfo" id="T8:U196"><span class="var type1" id="S13T27U253">rx</span>(<span class="var type1" id="S17T8U254">i</span>)</span> - <span class="mxinfo" id="T8:U199"><span class="var type1" id="S4T2U256">index</span>(<span class="var type1" id="S17T8U257">i</span>, <span class="mxinfo" id="T8:U202">1</span>)</span></span>)</span> + <span class="mxinfo" id="T55:U203"><span class="mxinfo" id="T55:U204"><span class="var type1" id="S3T54U261">img</span>(<span class="mxinfo" id="T8:U206"><span class="var type1" id="S13T27U263">rx</span>(<span class="var type1" id="S17T8U264">i</span>)</span>, <span class="mxinfo" id="T8:U209"><span class="var type1" id="S12T27U266">ly</span>(<span class="var type1" id="S17T8U267">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U212"><span class="mxinfo" id="T8:U213"><span class="var type1" id="S4T2U272">index</span>(<span class="var type1" id="S17T8U273">i</span>, <span class="mxinfo" id="T8:U216">1</span>)</span> - <span class="mxinfo" id="T8:U217"><span class="var type1" id="S10T27U276">lx</span>(<span class="var type1" id="S17T8U277">i</span>)</span></span>)</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,30" id="srcline30">30</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,31" id="srcline31">31</a></span><span class="line">        <span class="mxinfo" id="T56:U220"><span class="mxinfo" id="T56:U221"><span class="var type1" id="S2T57U282">val</span>(<span class="var type1" id="S17T8U283">i</span>, :)</span> = <span class="mxinfo" id="T56:U224">reshape(<span class="mxinfo" id="T55:U225">(<span class="mxinfo" id="T55:U226"><span class="mxinfo" id="T55:U227"><span class="mxinfo" id="T55:U228"><span class="var type1" id="S3T54U292">img</span>(<span class="mxinfo" id="T8:U230"><span class="var type1" id="S10T27U294">lx</span>(<span class="var type1" id="S17T8U295">i</span>)</span>, <span class="mxinfo" id="T8:U233"><span class="var type1" id="S12T27U297">ly</span>(<span class="var type1" id="S17T8U298">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U236"><span class="mxinfo" id="T8:U237"><span class="var type1" id="S15T27U303">ry</span>(<span class="var type1" id="S17T8U304">i</span>)</span> - <span class="mxinfo" id="T8:U240"><span class="var type1" id="S4T2U306">index</span>(<span class="var type1" id="S17T8U307">i</span>, <span class="mxinfo" id="T8:U243">2</span>)</span></span>)</span> + <span class="mxinfo" id="T55:U244"><span class="mxinfo" id="T55:U245"><span class="var type1" id="S3T54U311">img</span>(<span class="mxinfo" id="T8:U247"><span class="var type1" id="S10T27U313">lx</span>(<span class="var type1" id="S17T8U314">i</span>)</span>, <span class="mxinfo" id="T8:U250"><span class="var type1" id="S15T27U316">ry</span>(<span class="var type1" id="S17T8U317">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U253"><span class="mxinfo" id="T8:U254"><span class="var type1" id="S4T2U322">index</span>(<span class="var type1" id="S17T8U323">i</span>, <span class="mxinfo" id="T8:U257">2</span>)</span> - <span class="mxinfo" id="T8:U258"><span class="var type1" id="S12T27U326">ly</span>(<span class="var type1" id="S17T8U327">i</span>)</span></span>)</span></span>)*(<span class="mxinfo" id="T8:U261"><span class="mxinfo" id="T8:U262"><span class="var type1" id="S13T27U331">rx</span>(<span class="var type1" id="S17T8U332">i</span>)</span>-<span class="mxinfo" id="T8:U265"><span class="var type1" id="S4T2U334">index</span>(<span class="var type1" id="S17T8U335">i</span>, <span class="mxinfo" id="T8:U268">1</span>)</span></span>)</span>, 1, 3)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,32" id="srcline32">32</a></span><span class="line">        <span class="mxinfo" id="T56:U269"><span class="mxinfo" id="T56:U270"><span class="var type1" id="S2T57U342">val</span>(<span class="var type1" id="S17T8U343">i</span>, :)</span> = <span class="mxinfo" id="T56:U273"><span class="mxinfo" id="T56:U274"><span class="var type1" id="S2T57U347">val</span>(<span class="var type1" id="S17T8U348">i</span>, :)</span> + <span class="mxinfo" id="T56:U277">reshape(<span class="mxinfo" id="T55:U278">(<span class="mxinfo" id="T55:U279"><span class="mxinfo" id="T55:U280"><span class="mxinfo" id="T55:U281"><span class="var type1" id="S3T54U357">img</span>(<span class="mxinfo" id="T8:U283"><span class="var type1" id="S13T27U359">rx</span>(<span class="var type1" id="S17T8U360">i</span>)</span>, <span class="mxinfo" id="T8:U286"><span class="var type1" id="S12T27U362">ly</span>(<span class="var type1" id="S17T8U363">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U289"><span class="mxinfo" id="T8:U290"><span class="var type1" id="S15T27U368">ry</span>(<span class="var type1" id="S17T8U369">i</span>)</span>-<span class="mxinfo" id="T8:U293"><span class="var type1" id="S4T2U371">index</span>(<span class="var type1" id="S17T8U372">i</span>,<span class="mxinfo" id="T8:U296">2</span>)</span></span>)</span> + <span class="mxinfo" id="T55:U297"><span class="mxinfo" id="T55:U298"><span class="var type1" id="S3T54U376">img</span>(<span class="mxinfo" id="T8:U300"><span class="var type1" id="S13T27U378">rx</span>(<span class="var type1" id="S17T8U379">i</span>)</span>, <span class="mxinfo" id="T8:U303"><span class="var type1" id="S15T27U381">ry</span>(<span class="var type1" id="S17T8U382">i</span>)</span>, :)</span>*(<span class="mxinfo" id="T8:U306"><span class="mxinfo" id="T8:U307"><span class="var type1" id="S4T2U387">index</span>(<span class="var type1" id="S17T8U388">i</span>, <span class="mxinfo" id="T8:U310">2</span>)</span> - <span class="mxinfo" id="T8:U311"><span class="var type1" id="S12T27U391">ly</span>(<span class="var type1" id="S17T8U392">i</span>)</span></span>)</span></span>)*(<span class="mxinfo" id="T8:U314"><span class="mxinfo" id="T8:U315"><span class="var type1" id="S4T2U396">index</span>(<span class="var type1" id="S17T8U397">i</span>, <span class="mxinfo" id="T8:U318">1</span>)</span> - <span class="mxinfo" id="T8:U319"><span class="var type1" id="S10T27U400">lx</span>(<span class="var type1" id="S17T8U401">i</span>)</span></span>)</span>, 1, 3)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,33" id="srcline33">33</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,34" id="srcline34">34</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
